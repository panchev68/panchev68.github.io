<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTOS: RTOS::EventGroup</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Arch_FreeRTOS_64.png"/></td>
  <td id="projectalign">
   <div id="projectname">RTOS<span id="projectnumber">&#160;<code><a href="/doxygen-mermaid/index.html">ver: 7.00</a></code></span>
   </div>
   <div id="projectbrief">Free RTOS C++ Wrapper Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d4/d04/a00255.html','../../',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">RTOS::EventGroup</div></div>
</div><!--header-->
<div class="contents">
<p>.Demonstrates enhanced event group creation, bit manipulation, and synchronization patterns.</p>
<p>This example shows how to create an event group, set and clear event bits, wait for events with timeouts, and perform synchronization between tasks. It also demonstrates usage in ISR context.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d09/a00077.html">EventGroup.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Define event bit indices for clarity</span></div>
<div class="line"><span class="keyword">constexpr</span> <a id="_a0" name="_a0"></a><a class="code hl_typedef" href="../../d5/d4e/a00141.html#a012f775c662b6f78b957c0fbaaee59fd">RTOS::EventGroup::BitIndex</a> BUTTON_PRESSED = 0;</div>
<div class="line"><span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../d5/d4e/a00141.html#a012f775c662b6f78b957c0fbaaee59fd">RTOS::EventGroup::BitIndex</a> SENSOR_READY = 1;</div>
<div class="line"><span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../d5/d4e/a00141.html#a012f775c662b6f78b957c0fbaaee59fd">RTOS::EventGroup::BitIndex</a> DATA_AVAILABLE = 2;</div>
<div class="line"><span class="keyword">constexpr</span> <a class="code hl_typedef" href="../../d5/d4e/a00141.html#a012f775c662b6f78b957c0fbaaee59fd">RTOS::EventGroup::BitIndex</a> ERROR_OCCURRED = 3;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> eventGroupExample() {</div>
<div class="line">    <span class="comment">// Create event group with factory method</span></div>
<div class="line">    <span class="keyword">auto</span> events = <a id="a1" name="a1"></a><a class="code hl_function" href="../../d5/d4e/a00141.html#ae123b21b37e587e5e424af4651768471">RTOS::EventGroup::create</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (events &amp;&amp; events-&gt;isCreated()) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;EventGroup created successfully\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Set individual bits</span></div>
<div class="line">        events-&gt;setBit(SENSOR_READY);</div>
<div class="line">        events-&gt;setBit(DATA_AVAILABLE);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check if specific bits are set</span></div>
<div class="line">        <span class="keywordflow">if</span> (events-&gt;isBitSet(SENSOR_READY)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Sensor is ready\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Wait for button press with timeout</span></div>
<div class="line">        <span class="keywordtype">bool</span> buttonPressed = events-&gt;waitForBit(BUTTON_PRESSED, 1000);</div>
<div class="line">        <span class="keywordflow">if</span> (buttonPressed) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Button was pressed within timeout\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Create bit pattern and wait for any</span></div>
<div class="line">        <a id="_a2" name="_a2"></a><a class="code hl_typedef" href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a> waitBits;</div>
<div class="line">        waitBits.set(BUTTON_PRESSED);</div>
<div class="line">        waitBits.set(ERROR_OCCURRED);</div>
<div class="line"> </div>
<div class="line">        <span class="keyword">auto</span> result = events-&gt;waitForBitsMs(waitBits, 500,</div>
<div class="line">                                           <a id="_a3" name="_a3"></a><a class="code hl_enumvalue" href="../../d5/d4e/a00141.html#a7842763cd7cbf505f418b7e9820de1e1adc30bc0c7914db5918da4263fce93ad2">RTOS::EventGroup::ClearMode::Clear</a>,</div>
<div class="line">                                           <a id="_a4" name="_a4"></a><a class="code hl_enumvalue" href="../../d5/d4e/a00141.html#ae93b1d87c779d4ac130983129d6b4ae5aed36a1ef76a59ee3f15180e0441188ad">RTOS::EventGroup::WaitMode::Any</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (result.test(BUTTON_PRESSED)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Button event received\n&quot;</span>);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result.test(ERROR_OCCURRED)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error event received\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check current state</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;Current bits: %s\n&quot;</span>, events-&gt;getBits().to_string().c_str());</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Clear all bits</span></div>
<div class="line">        events-&gt;clearAllBits();</div>
<div class="line">        printf(<span class="stringliteral">&quot;All bits cleared\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Create with initial bit pattern</span></div>
<div class="line">    <a class="code hl_typedef" href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a> initialBits;</div>
<div class="line">    initialBits.set(SENSOR_READY);</div>
<div class="line">    initialBits.set(DATA_AVAILABLE);</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> presetEvents = <a id="a5" name="a5"></a><a class="code hl_function" href="../../d5/d4e/a00141.html#a61a8779292999712471f4678597d0ac0">RTOS::EventGroup::createWithBits</a>(initialBits);</div>
<div class="line">    <span class="keywordflow">if</span> (presetEvents) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;EventGroup created with preset bits\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check if all required bits are set</span></div>
<div class="line">        <a class="code hl_typedef" href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a> requiredBits;</div>
<div class="line">        requiredBits.set(SENSOR_READY);</div>
<div class="line">        requiredBits.set(DATA_AVAILABLE);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (presetEvents-&gt;allBitsSet(requiredBits)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;All required bits are set\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Task synchronization example</span></div>
<div class="line"><span class="keywordtype">void</span> taskSyncExample() {</div>
<div class="line">    <span class="keyword">auto</span> syncEvents = <a class="code hl_function" href="../../d5/d4e/a00141.html#ae123b21b37e587e5e424af4651768471">RTOS::EventGroup::create</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (!syncEvents) <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Task 1: Set bit and wait for response</span></div>
<div class="line">    syncEvents-&gt;setBit(0);  <span class="comment">// Signal task 2</span></div>
<div class="line">    <span class="keywordtype">bool</span> response = syncEvents-&gt;waitForBit(1, 1000);  <span class="comment">// Wait for task 2 response</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Task 2: Wait for signal and respond</span></div>
<div class="line">    <span class="keywordflow">if</span> (syncEvents-&gt;waitForBit(0, 1000)) {  <span class="comment">// Wait for task 1 signal</span></div>
<div class="line">        syncEvents-&gt;setBit(1);  <span class="comment">// Respond to task 1</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Synchronization with multiple tasks</span></div>
<div class="line">    <a class="code hl_typedef" href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a> syncBits;</div>
<div class="line">    syncBits.set(2);  <span class="comment">// This task&#39;s bit</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a> waitBits;</div>
<div class="line">    waitBits.set(3);  <span class="comment">// Other task&#39;s bit</span></div>
<div class="line">    waitBits.set(4);  <span class="comment">// Another task&#39;s bit</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">auto</span> result = syncEvents-&gt;syncBits(syncBits, waitBits, 5000);</div>
<div class="line">    <span class="keywordflow">if</span> (syncEvents-&gt;allBitsSet(waitBits)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;All tasks synchronized\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// ISR usage example</span></div>
<div class="line"><span class="keywordtype">void</span> buttonISR() {</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">auto</span> events = <a class="code hl_function" href="../../d5/d4e/a00141.html#ae123b21b37e587e5e424af4651768471">RTOS::EventGroup::create</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (events) {</div>
<div class="line">        events-&gt;setBitFromISR(BUTTON_PRESSED);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aa00077_html"><div class="ttname"><a href="../../d1/d09/a00077.html">EventGroup.hpp</a></div><div class="ttdoc">Event group C++ wrapper for FreeRTOS event groups.</div></div>
<div class="ttc" id="aa00077_html_a6409dee49239fc30c27bcc7cc5f52011"><div class="ttname"><a href="../../d1/d09/a00077.html#a6409dee49239fc30c27bcc7cc5f52011">RTOS::EventBits</a></div><div class="ttdeci">std::bitset&lt; 24 &gt; EventBits</div><div class="ttdoc">Default 24 event bits for IDE support.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:41</div></div>
<div class="ttc" id="aa00141_html_a012f775c662b6f78b957c0fbaaee59fd"><div class="ttname"><a href="../../d5/d4e/a00141.html#a012f775c662b6f78b957c0fbaaee59fd">RTOS::EventGroup::BitIndex</a></div><div class="ttdeci">uint8_t BitIndex</div><div class="ttdoc">Event bit index type.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:61</div></div>
<div class="ttc" id="aa00141_html_a61a8779292999712471f4678597d0ac0"><div class="ttname"><a href="../../d5/d4e/a00141.html#a61a8779292999712471f4678597d0ac0">RTOS::EventGroup::createWithBits</a></div><div class="ttdeci">static std::unique_ptr&lt; EventGroup &gt; createWithBits(const EventBits &amp;initialBits)</div><div class="ttdoc">Creates an EventGroup with specific initial bit pattern.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:168</div></div>
<div class="ttc" id="aa00141_html_a7842763cd7cbf505f418b7e9820de1e1adc30bc0c7914db5918da4263fce93ad2"><div class="ttname"><a href="../../d5/d4e/a00141.html#a7842763cd7cbf505f418b7e9820de1e1adc30bc0c7914db5918da4263fce93ad2">RTOS::EventGroup::ClearMode::Clear</a></div><div class="ttdeci">@ Clear</div><div class="ttdoc">Clear bits on exit.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:82</div></div>
<div class="ttc" id="aa00141_html_ae123b21b37e587e5e424af4651768471"><div class="ttname"><a href="../../d5/d4e/a00141.html#ae123b21b37e587e5e424af4651768471">RTOS::EventGroup::create</a></div><div class="ttdeci">bool create()</div><div class="ttdoc">Creates the event group.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:197</div></div>
<div class="ttc" id="aa00141_html_ae93b1d87c779d4ac130983129d6b4ae5aed36a1ef76a59ee3f15180e0441188ad"><div class="ttname"><a href="../../d5/d4e/a00141.html#ae93b1d87c779d4ac130983129d6b4ae5aed36a1ef76a59ee3f15180e0441188ad">RTOS::EventGroup::WaitMode::Any</a></div><div class="ttdeci">@ Any</div><div class="ttdoc">Wait for any of the specified bits.</div><div class="ttdef"><b>Definition</b> EventGroup.hpp:72</div></div>
</div><!-- fragment --><div class="fragment"></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on <span class="timestamp"></span> for RTOS by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'base', 
    themeVariables: {
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
    },
  });
</script>
</body>
</html>
