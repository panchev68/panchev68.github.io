<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Tips and Tricks: Builder Pattern</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript">var page_layout=1;</script>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="side-nav" class="ui-resizable side-nav-resizable"><!-- do not remove this div, it is closed by doxygen! -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">C++ Tips and Tricks<span id="projectnumber">&#160;2.00</span>
   </div>
   <div id="projectbrief">C++</div>
  </td>
 </tr>
   <tr><td colspan="2">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('d2/da3/a00115.html','../../',''); });
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',false,false,'search.php','Search',true);
});
</script>
<div id="main-nav"></div>
<div id="container"><div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Builder Pattern </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Патернът Builder е шаблон за проектиране, който предоставя гъвкаво решение за създаване на сложни обекти стъпка по стъпка.</p>
<h3 class="doxsection"><a class="anchor" id="въведение"></a>
Въведение</h3>
<p>Патернът Builder е шаблон за проектиране, създаден да предостави гъвкаво решение за различни проблеми при създаването на обекти в обектно-ориентираното програмиране. Използва се за конструиране на сложен обект стъпка по стъпка, като последната стъпка ще върне обекта. Процесът на конструиране на обект трябва да бъде общ, така че да може да се използва за създаване на различни представяния на един и същ обект.</p>
<p>Патернът Builder е полезен, когато:</p><ul>
<li>Алгоритъмът за създаване на сложен обект трябва да бъде независим от частите, които съставляват обекта и как те са сглобени.</li>
<li>Процесът на конструиране трябва да позволява различни представяния на обекта, който се конструира.</li>
</ul>
<h3 class="doxsection"><a class="anchor" id="пример-за-builder"></a>
Пример за Builder</h3>
<div class="fragment"><div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * @file Builder.hpp</span></div>
<div class="line"><span class="comment"> * Demonstrates the Builder design pattern for constructing complex objects step by step in C++.</span></div>
<div class="line"><span class="comment"> * This file defines a Product class, an abstract Builder interface, a ConcreteBuilder implementation,</span></div>
<div class="line"><span class="comment"> * and a Director class to orchestrate the construction process. The example shows how to build a</span></div>
<div class="line"><span class="comment"> * Product object with multiple parts using the Builder pattern, ensuring separation of construction</span></div>
<div class="line"><span class="comment"> * and representation for flexible object creation in embedded and application code.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#pragma once</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Represents a complex product composed of multiple parts.</span></div>
<div class="line"><span class="comment"> * The Product class encapsulates the parts that are constructed step by step by the Builder pattern,</span></div>
<div class="line"><span class="comment"> * allowing flexible and controlled assembly of its components for various configurations.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">class </span>Product {</div>
<div class="line"><span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Sets the value of PartA in the product.</span></div>
<div class="line"><span class="comment">     * @param partA The string value to assign to PartA.</span></div>
<div class="line"><span class="comment">     * @pre partA must be a valid string.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> setPartA(<span class="keyword">const</span> std::string &amp; partA) { this-&gt;partA = partA; }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Sets the value of PartB in the product.</span></div>
<div class="line"><span class="comment">     * @param partB The string value to assign to PartB.</span></div>
<div class="line"><span class="comment">     * @pre partB must be a valid string.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> setPartB(<span class="keyword">const</span> std::string &amp; partB) { this-&gt;partB = partB; }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Sets the value of PartC in the product.</span></div>
<div class="line"><span class="comment">     * @param partC The string value to assign to PartC.</span></div>
<div class="line"><span class="comment">     * @pre partC must be a valid string.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> setPartC(<span class="keyword">const</span> std::string &amp; partC) { this-&gt;partC = partC; }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Displays the product&#39;s parts to the standard output.</span></div>
<div class="line"><span class="comment">     * @pre All parts should be set before calling this method.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> show()<span class="keyword"> const </span>{ std::cout &lt;&lt; <span class="stringliteral">&quot;Product Parts: &quot;</span> &lt;&lt; partA &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; partB &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; partC &lt;&lt; std::endl; }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    std::string partA; <span class="comment">///&lt; Holds the value for PartA of the product.</span></div>
<div class="line">    std::string partB; <span class="comment">///&lt; Holds the value for PartB of the product.</span></div>
<div class="line">    std::string partC; <span class="comment">///&lt; Holds the value for PartC of the product.</span></div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Defines the interface for building parts of a Product.</span></div>
<div class="line"><span class="comment"> * The Builder abstract class specifies the methods required to construct each part of a Product,</span></div>
<div class="line"><span class="comment"> * enabling different implementations for various product representations and construction processes.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">class </span>Builder {</div>
<div class="line"><span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Virtual destructor for safe polymorphic deletion of Builder objects.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">virtual</span> ~Builder() = <span class="keywordflow">default</span>;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartA of the product.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> buildPartA() = 0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartB of the product.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> buildPartB() = 0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartC of the product.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> buildPartC() = 0;</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Returns the constructed Product object.</span></div>
<div class="line"><span class="comment">     * @return Pointer to the constructed Product.</span></div>
<div class="line"><span class="comment">     * @pre Product must be fully or partially built before calling this method.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keyword">virtual</span> Product * getResult() = 0;</div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Implements the Builder interface to construct a specific Product.</span></div>
<div class="line"><span class="comment"> * The ConcreteBuilder class provides concrete implementations for building each part of the Product,</span></div>
<div class="line"><span class="comment"> * managing the product&#39;s lifecycle and ensuring correct assembly of its components.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">class </span>ConcreteBuilder : <span class="keyword">public</span> Builder {</div>
<div class="line"><span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Constructs a ConcreteBuilder and initializes a new Product instance.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    ConcreteBuilder() : product(new Product()) {}</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Destroys the ConcreteBuilder and releases the Product instance.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    ~ConcreteBuilder()<span class="keyword"> override </span>{ <span class="keyword">delete</span> product; }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartA of the product by assigning a predefined value.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> buildPartA()<span class="keyword"> override </span>{ product-&gt;setPartA(<span class="stringliteral">&quot;PartA&quot;</span>); }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartB of the product by assigning a predefined value.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> buildPartB()<span class="keyword"> override </span>{ product-&gt;setPartB(<span class="stringliteral">&quot;PartB&quot;</span>); }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Builds PartC of the product by assigning a predefined value.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> buildPartC()<span class="keyword"> override </span>{ product-&gt;setPartC(<span class="stringliteral">&quot;PartC&quot;</span>); }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Returns the constructed Product object and transfers ownership to the caller.</span></div>
<div class="line"><span class="comment">     * @return Pointer to the constructed Product.</span></div>
<div class="line"><span class="comment">     * @pre Product must be built before calling this method.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    Product * getResult()<span class="keyword"> override </span>{</div>
<div class="line">        Product * result = product;</div>
<div class="line">        product = <span class="keyword">nullptr</span>;</div>
<div class="line">        <span class="keywordflow">return</span> result;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    Product * product; <span class="comment">///&lt; Pointer to the Product being constructed.</span></div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Directs the construction process using a Builder instance.</span></div>
<div class="line"><span class="comment"> * The Director class orchestrates the sequence of building steps, ensuring the correct order and</span></div>
<div class="line"><span class="comment"> * completeness of the constructed Product by delegating to the Builder interface.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">class </span>Director {</div>
<div class="line"><span class="keyword">public</span>:<span class="comment"></span></div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Sets the Builder instance to be used for construction.</span></div>
<div class="line"><span class="comment">     * @param builder Pointer to the Builder to use.</span></div>
<div class="line"><span class="comment">     * @pre builder must not be nullptr.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> setBuilder(Builder * builder) { this-&gt;builder = builder; }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">    /**</span></div>
<div class="line"><span class="comment">     * Constructs the product by invoking the builder&#39;s part-building methods in sequence.</span></div>
<div class="line"><span class="comment">     * @pre builder must be set before calling this method.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    <span class="keywordtype">void</span> construct() {</div>
<div class="line">        <span class="keywordflow">if</span> (builder != <span class="keyword">nullptr</span>) {</div>
<div class="line">            builder-&gt;buildPartA();</div>
<div class="line">            builder-&gt;buildPartB();</div>
<div class="line">            builder-&gt;buildPartC();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    Builder * builder = <span class="keyword">nullptr</span>; <span class="comment">///&lt; Pointer to the Builder used for construction.</span></div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * Entry point demonstrating the Builder pattern for constructing a Product.</span></div>
<div class="line"><span class="comment"> * @return Returns 0 on successful execution.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    Director director;</div>
<div class="line">    ConcreteBuilder builder;</div>
<div class="line">    director.setBuilder(&amp;builder);</div>
<div class="line">    director.construct();</div>
<div class="line">    Product * product = builder.getResult();</div>
<div class="line">    <span class="keywordflow">if</span> (product != <span class="keyword">nullptr</span>) {</div>
<div class="line">        product-&gt;show();</div>
<div class="line">        <span class="keyword">delete</span> product;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<h3 class="doxsection"><a class="anchor" id="подробно-описание-на-примера"></a>
Подробно описание на примера</h3>
<p>Този пример демонстрира как да се използва патернът Builder за създаване на сложен обект Product. В този пример Product се състои от три части: PartA, PartB и PartC. Builder интерфейсът дефинира методите за създаване на всяка част на Product. ConcreteBuilder класът имплементира Builder интерфейса и създава Product обект. Director класът управлява процеса на конструиране на Product обекта. В main функцията се създава Director обект, ConcreteBuilder обект и се извиква метода construct, който създава Product обекта. Накрая се извежда Product обекта на стандартния изход.</p>
<h1 class="doxsection"><a class="anchor" id="BUILDER_REFERENCES"></a>
За повече информация</h1>
<p>За повече информация вижте следните ресурси:</p><ul>
<li><a href="https://en.wikipedia.org/wiki/Builder_pattern">https://en.wikipedia.org/wiki/Builder_pattern</a></li>
<li><a href="https://www.geeksforgeeks.org/builder-design-pattern/">https://www.geeksforgeeks.org/builder-design-pattern/</a></li>
<li><a href="https://refactoring.guru/design-patterns/builder">https://refactoring.guru/design-patterns/builder</a>  </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="../../index.html">DESIGN_PATTERNS Design Patterns in C++</a></li>
    <li class="footer">Generated on <span class="timestamp"></span> for C++ Tips and Tricks by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
