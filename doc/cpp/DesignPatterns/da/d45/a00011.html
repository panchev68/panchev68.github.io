<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C++ Design Patterns: Prototype</title>
<link rel="icon" href="../../logo-new-winter.png" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo-new-winter.png"/></td>
  <td id="projectalign">
   <div id="projectname">C++ Design Patterns<span id="projectnumber">&#160;1.00</span>
   </div>
   <div id="projectbrief">C++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('da/d45/a00011.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Prototype</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Прототипът е модел за създаване на дизайн, който позволява клониране на обекти, дори сложни, без свързване към техните специфични класове.</p>
<p>Всички прототипни класове трябва да имат общ интерфейс, който позволява копирането на обекти, дори ако техните конкретни класове са неизвестни. Прототипните обекти могат да произвеждат пълни копия, тъй като обектите от един и същи клас имат достъп до личните полета на другия.</p>
<dl class="section user"><dt>Пример</dt><dd>Този пример илюстрира структурата на шаблона за проектиране на прототип . Той се фокусира върху отговорите на тези въпроси:</dd></dl>
<p>От какви класове се състои? Какви роли играят тези класове? По какъв начин са свързани елементите на модела?</p>
<div class="fragment"><div class="line"><span class="keyword">using </span>std::string;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Prototype Design Pattern</span></div>
<div class="line"><span class="comment">//</span></div>
<div class="line"><span class="comment">// Intent: Lets you copy existing objects without making your code dependent on</span></div>
<div class="line"><span class="comment">// their classes.</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> Type {</div>
<div class="line">  PROTOTYPE_1 = 0,</div>
<div class="line">  PROTOTYPE_2</div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * The example class that has cloning ability. We&#39;ll see how the values of field</span></div>
<div class="line"><span class="comment"> * with different types will be cloned.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Prototype {</div>
<div class="line"> <span class="keyword">protected</span>:</div>
<div class="line">  <span class="keywordtype">string</span> prototype_name_;</div>
<div class="line">  <span class="keywordtype">float</span> prototype_field_;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  Prototype() {}</div>
<div class="line">  Prototype(<span class="keywordtype">string</span> prototype_name)</div>
<div class="line">      : prototype_name_(prototype_name) {</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">virtual</span> ~Prototype() {}</div>
<div class="line">  <span class="keyword">virtual</span> Prototype *Clone() <span class="keyword">const</span> = 0;</div>
<div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">void</span> Method(<span class="keywordtype">float</span> prototype_field) {</div>
<div class="line">    this-&gt;prototype_field_ = prototype_field;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Call Method from &quot;</span> &lt;&lt; prototype_name_ &lt;&lt; <span class="stringliteral">&quot; with field : &quot;</span> &lt;&lt; prototype_field &lt;&lt; std::endl;</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * ConcretePrototype1 is a Sub-Class of Prototype and implement the Clone Method</span></div>
<div class="line"><span class="comment"> * In this example all data members of Prototype Class are in the Stack. If you</span></div>
<div class="line"><span class="comment"> * have pointers in your properties for ex: String* name_ ,you will need to</span></div>
<div class="line"><span class="comment"> * implement the Copy-Constructor to make sure you have a deep copy from the</span></div>
<div class="line"><span class="comment"> * clone method</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ConcretePrototype1 : <span class="keyword">public</span> Prototype {</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  <span class="keywordtype">float</span> concrete_prototype_field1_;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  ConcretePrototype1(<span class="keywordtype">string</span> prototype_name, <span class="keywordtype">float</span> concrete_prototype_field)</div>
<div class="line">      : Prototype(prototype_name), concrete_prototype_field1_(concrete_prototype_field) {</div>
<div class="line">  }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  /**</span></div>
<div class="line"><span class="comment">   * Notice that Clone method return a Pointer to a new ConcretePrototype1</span></div>
<div class="line"><span class="comment">   * replica. so, the client (who call the clone method) has the responsability</span></div>
<div class="line"><span class="comment">   * to free that memory. If you have smart pointer knowledge you may prefer to</span></div>
<div class="line"><span class="comment">   * use unique_pointer here.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  Prototype *Clone()<span class="keyword"> const override </span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> ConcretePrototype1(*<span class="keyword">this</span>);</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ConcretePrototype2 : <span class="keyword">public</span> Prototype {</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  <span class="keywordtype">float</span> concrete_prototype_field2_;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  ConcretePrototype2(<span class="keywordtype">string</span> prototype_name, <span class="keywordtype">float</span> concrete_prototype_field)</div>
<div class="line">      : Prototype(prototype_name), concrete_prototype_field2_(concrete_prototype_field) {</div>
<div class="line">  }</div>
<div class="line">  Prototype *Clone()<span class="keyword"> const override </span>{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> ConcretePrototype2(*<span class="keyword">this</span>);</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">/**</span></div>
<div class="line"><span class="comment"> * In PrototypeFactory you have two concrete prototypes, one for each concrete</span></div>
<div class="line"><span class="comment"> * prototype class, so each time you want to create a bullet , you can use the</span></div>
<div class="line"><span class="comment"> * existing ones and clone those.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>PrototypeFactory {</div>
<div class="line"> <span class="keyword">private</span>:</div>
<div class="line">  std::unordered_map&lt;Type, Prototype *, std::hash&lt;int&gt;&gt; prototypes_;</div>
<div class="line"> </div>
<div class="line"> <span class="keyword">public</span>:</div>
<div class="line">  PrototypeFactory() {</div>
<div class="line">    prototypes_[Type::PROTOTYPE_1] = <span class="keyword">new</span> ConcretePrototype1(<span class="stringliteral">&quot;PROTOTYPE_1 &quot;</span>, 50.f);</div>
<div class="line">    prototypes_[Type::PROTOTYPE_2] = <span class="keyword">new</span> ConcretePrototype2(<span class="stringliteral">&quot;PROTOTYPE_2 &quot;</span>, 60.f);</div>
<div class="line">  }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  /**</span></div>
<div class="line"><span class="comment">   * Be carefull of free all memory allocated. Again, if you have smart pointers</span></div>
<div class="line"><span class="comment">   * knowelege will be better to use it here.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line"> </div>
<div class="line">  ~PrototypeFactory() {</div>
<div class="line">    <span class="keyword">delete</span> prototypes_[Type::PROTOTYPE_1];</div>
<div class="line">    <span class="keyword">delete</span> prototypes_[Type::PROTOTYPE_2];</div>
<div class="line">  }</div>
<div class="line"><span class="comment"></span> </div>
<div class="line"><span class="comment">  /**</span></div>
<div class="line"><span class="comment">   * Notice here that you just need to specify the type of the prototype you</span></div>
<div class="line"><span class="comment">   * want and the method will create from the object with this type.</span></div>
<div class="line"><span class="comment">   */</span></div>
<div class="line">  Prototype *CreatePrototype(Type type) {</div>
<div class="line">    <span class="keywordflow">return</span> prototypes_[type]-&gt;Clone();</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> Client(PrototypeFactory &amp;prototype_factory) {</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Let&#39;s create a Prototype 1\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  Prototype *prototype = prototype_factory.CreatePrototype(Type::PROTOTYPE_1);</div>
<div class="line">  prototype-&gt;Method(90);</div>
<div class="line">  <span class="keyword">delete</span> prototype;</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Let&#39;s create a Prototype 2 \n&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  prototype = prototype_factory.CreatePrototype(Type::PROTOTYPE_2);</div>
<div class="line">  prototype-&gt;Method(10);</div>
<div class="line"> </div>
<div class="line">  <span class="keyword">delete</span> prototype;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  PrototypeFactory *prototype_factory = <span class="keyword">new</span> PrototypeFactory();</div>
<div class="line">  Client(*prototype_factory);</div>
<div class="line">  <span class="keyword">delete</span> prototype_factory;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section user"><dt>Output:</dt><dd></dd></dl>
<pre class="fragment">Let's create a Prototype 1
Call Method from PROTOTYPE_1  with field : 90

Let's create a Prototype 2 
Call Method from PROTOTYPE_2  with field : 10
</pre><dl class="section see"><dt>See also</dt><dd><a href="https://refactoring.guru/design-patterns/prototype/cpp/example#lang-features">Prototype</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Design Patterns in C++</a></li><li class="navelem"><a class="el" href="../../dd/dad/a00005.html">Creational Patterns</a></li>
    <li class="footer">Generated on Tue Jan 7 2025 11:07:02 for C++ Design Patterns by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.1 </li>
  </ul>
</div>
</body>
</html>
