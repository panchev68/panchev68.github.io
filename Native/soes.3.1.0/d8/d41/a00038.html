<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SOES: esc_foe.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SOES<span id="projectnumber">&#160;v3.1.0</span>
   </div>
   <div id="projectbrief">Simple Open Source EtherCAT Slave</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/d41/a00038.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">esc_foe.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the implementation of the File over EtherCAT (FoE) protocol. </p>
<p>The FoE protocol is used for file transfer over EtherCAT networks. This file includes functions for initializing the FoE service, handling FoE requests, and managing file transfers. </p>
</div><div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d32/a00041.html">esc_foe.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d51/a00017.html">esc.h</a>&quot;</code><br />
<code>#include &lt;cc.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for esc_foe.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/de7/a00039.svg" width="492" height="262"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a97f7ba1088e69d82d24ce6326d9b0800" id="r_a97f7ba1088e69d82d24ce6326d9b0800"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a97f7ba1088e69d82d24ce6326d9b0800">FOE_fopen</a> (char *name, uint8_t num_chars, uint32_t pass, uint8_t op)</td></tr>
<tr class="memdesc:a97f7ba1088e69d82d24ce6326d9b0800"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate a write or read request by checking filename and password.  <br /></td></tr>
<tr class="separator:a97f7ba1088e69d82d24ce6326d9b0800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade156a8af993e2d107fab2fe1d46a32b" id="r_ade156a8af993e2d107fab2fe1d46a32b"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade156a8af993e2d107fab2fe1d46a32b">FOE_fwrite</a> (uint8_t *data, uint32_t length)</td></tr>
<tr class="memdesc:ade156a8af993e2d107fab2fe1d46a32b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function reading mailbox buffer to local buffer to be handled by application write hook. Ex. flash routine used by software update. It will consume the buffer and call the write hook every time the configured flush buffer limit is reached.  <br /></td></tr>
<tr class="separator:ade156a8af993e2d107fab2fe1d46a32b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dc533c94da57271e465fedbab5c3372" id="r_a3dc533c94da57271e465fedbab5c3372"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3dc533c94da57271e465fedbab5c3372">FOE_fclose</a> (void)</td></tr>
<tr class="memdesc:a3dc533c94da57271e465fedbab5c3372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function handling the final FOE_fwrite when we close up regardless if we have filled the buffers or not.  <br /></td></tr>
<tr class="separator:a3dc533c94da57271e465fedbab5c3372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab759787663f3dbf3eefc2d7d4ebb7a48" id="r_ab759787663f3dbf3eefc2d7d4ebb7a48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab759787663f3dbf3eefc2d7d4ebb7a48">FOE_init</a> ()</td></tr>
<tr class="memdesc:ab759787663f3dbf3eefc2d7d4ebb7a48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize by clearing all current status variables.  <br /></td></tr>
<tr class="separator:ab759787663f3dbf3eefc2d7d4ebb7a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a0cb7fec14e1860220a272c82152c1" id="r_aa0a0cb7fec14e1860220a272c82152c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa0a0cb7fec14e1860220a272c82152c1">FOE_abort</a> (uint32_t code)</td></tr>
<tr class="memdesc:aa0a0cb7fec14e1860220a272c82152c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for sending an FOE abort frame.  <br /></td></tr>
<tr class="separator:aa0a0cb7fec14e1860220a272c82152c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f46f3b293f1ba5213ab65aa6464ae40" id="r_a4f46f3b293f1ba5213ab65aa6464ae40"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4f46f3b293f1ba5213ab65aa6464ae40">FOE_send_ack</a> ()</td></tr>
<tr class="memdesc:a4f46f3b293f1ba5213ab65aa6464ae40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an FoE ack data frame.  <br /></td></tr>
<tr class="separator:a4f46f3b293f1ba5213ab65aa6464ae40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfbccffdc68d71c309992b25e4339d21" id="r_adfbccffdc68d71c309992b25e4339d21"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adfbccffdc68d71c309992b25e4339d21">FOE_write</a> ()</td></tr>
<tr class="memdesc:adfbccffdc68d71c309992b25e4339d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">FoE write request handler. Starts with Initialize, Open and Ack that we can/will receive data. On error we will send FOE Abort.  <br /></td></tr>
<tr class="separator:adfbccffdc68d71c309992b25e4339d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2105027e8810742242702e1cfee11807" id="r_a2105027e8810742242702e1cfee11807"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2105027e8810742242702e1cfee11807">FOE_data</a> ()</td></tr>
<tr class="memdesc:a2105027e8810742242702e1cfee11807"><td class="mdescLeft">&#160;</td><td class="mdescRight">FoE data request handler. Validates and reads data until we're finished. Every read frame followed by an Ack frame. On error we will send FOE Abort.  <br /></td></tr>
<tr class="separator:a2105027e8810742242702e1cfee11807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c1c741b188bfe85dac350ba142cbda" id="r_ad5c1c741b188bfe85dac350ba142cbda"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5c1c741b188bfe85dac350ba142cbda">FOE_error</a> ()</td></tr>
<tr class="memdesc:ad5c1c741b188bfe85dac350ba142cbda"><td class="mdescLeft">&#160;</td><td class="mdescRight">FoE error request handler. Send an FOE Abort.  <br /></td></tr>
<tr class="separator:ad5c1c741b188bfe85dac350ba142cbda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a123040e4dfa64b7acbd9d051ff45bd" id="r_a1a123040e4dfa64b7acbd9d051ff45bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1a123040e4dfa64b7acbd9d051ff45bd">FOE_config</a> (<a class="el" href="../../dd/d32/a00041.html#a7685793837c0c8b6c72dd3111024c4a1">foe_cfg_t</a> *cfg)</td></tr>
<tr class="memdesc:a1a123040e4dfa64b7acbd9d051ff45bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function copying the application configuration variable to the FoE module local pointer variable.  <br /></td></tr>
<tr class="separator:a1a123040e4dfa64b7acbd9d051ff45bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ace265be44ccc2a0af313d007261b2" id="r_a57ace265be44ccc2a0af313d007261b2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57ace265be44ccc2a0af313d007261b2">ESC_foeprocess</a> (void)</td></tr>
<tr class="memdesc:a57ace265be44ccc2a0af313d007261b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main FoE function checking the status on current mailbox buffers carrying data, distributing the mailboxes to appropriate FOE functions depending on requested opcode. On Error an FoE Error or FoE Abort will be sent.  <br /></td></tr>
<tr class="separator:a57ace265be44ccc2a0af313d007261b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1f2c07c0dfd2d9a88c27b47abf1651af" id="r_a1f2c07c0dfd2d9a88c27b47abf1651af"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1f2c07c0dfd2d9a88c27b47abf1651af">foe_file_name</a> [<a class="el" href="../../dd/d32/a00041.html#a67c78bb265f195309e12db00ead5e50e">FOE_FN_MAX</a>+1]</td></tr>
<tr class="memdesc:a1f2c07c0dfd2d9a88c27b47abf1651af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable holding current filename read at FOE Open.  <br /></td></tr>
<tr class="separator:a1f2c07c0dfd2d9a88c27b47abf1651af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc484767f3b463b2a72365d9c761a1f" id="r_a7cc484767f3b463b2a72365d9c761a1f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d32/a00041.html#a7685793837c0c8b6c72dd3111024c4a1">foe_cfg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cc484767f3b463b2a72365d9c761a1f">foe_cfg</a></td></tr>
<tr class="separator:a7cc484767f3b463b2a72365d9c761a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf71eb8bad5e552b2b8eccef7050e98" id="r_a9cf71eb8bad5e552b2b8eccef7050e98"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d32/a00041.html#aa2b23175c3134e03271153b3894b6059">foe_file_cfg_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9cf71eb8bad5e552b2b8eccef7050e98">foe_file</a></td></tr>
<tr class="separator:a9cf71eb8bad5e552b2b8eccef7050e98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd7d70e05228c39934e5605bc705839" id="r_adcd7d70e05228c39934e5605bc705839"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d32/a00041.html#aacf681139f484fc5fd6bfcc1a3e67e62">_FOEvar</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adcd7d70e05228c39934e5605bc705839">FOEvar</a></td></tr>
<tr class="separator:adcd7d70e05228c39934e5605bc705839"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a57ace265be44ccc2a0af313d007261b2" name="a57ace265be44ccc2a0af313d007261b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ace265be44ccc2a0af313d007261b2">&#9670;&#160;</a></span>ESC_foeprocess()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ESC_foeprocess </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main FoE function checking the status on current mailbox buffers carrying data, distributing the mailboxes to appropriate FOE functions depending on requested opcode. On Error an FoE Error or FoE Abort will be sent. </p>
<p>Processes the File over EtherCAT (FoE) protocol. </p>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a57ace265be44ccc2a0af313d007261b2_cgraph.svg" width="590" height="342"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a57ace265be44ccc2a0af313d007261b2_icgraph.svg" width="414" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa0a0cb7fec14e1860220a272c82152c1" name="aa0a0cb7fec14e1860220a272c82152c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0a0cb7fec14e1860220a272c82152c1">&#9670;&#160;</a></span>FOE_abort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FOE_abort </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>code</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function for sending an FOE abort frame. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">code</td><td>Abort code </td></tr>
  </table>
  </dd>
</dl>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_aa0a0cb7fec14e1860220a272c82152c1_cgraph.svg" width="263" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_aa0a0cb7fec14e1860220a272c82152c1_icgraph.svg" width="678" height="158"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1a123040e4dfa64b7acbd9d051ff45bd" name="a1a123040e4dfa64b7acbd9d051ff45bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a123040e4dfa64b7acbd9d051ff45bd">&#9670;&#160;</a></span>FOE_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FOE_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d32/a00041.html#a7685793837c0c8b6c72dd3111024c4a1">foe_cfg_t</a> *</td>          <td class="paramname"><span class="paramname"><em>cfg</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function copying the application configuration variable to the FoE module local pointer variable. </p>
<p>Configures the File Over EtherCAT (FoE) settings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>Pointer to by the Application static declared configuration variable holding application specific details. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2105027e8810742242702e1cfee11807" name="a2105027e8810742242702e1cfee11807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2105027e8810742242702e1cfee11807">&#9670;&#160;</a></span>FOE_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FOE_data </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FoE data request handler. Validates and reads data until we're finished. Every read frame followed by an Ack frame. On error we will send FOE Abort. </p>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a2105027e8810742242702e1cfee11807_cgraph.svg" width="418" height="218"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a2105027e8810742242702e1cfee11807_icgraph.svg" width="543" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad5c1c741b188bfe85dac350ba142cbda" name="ad5c1c741b188bfe85dac350ba142cbda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5c1c741b188bfe85dac350ba142cbda">&#9670;&#160;</a></span>FOE_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FOE_error </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FoE error request handler. Send an FOE Abort. </p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_ad5c1c741b188bfe85dac350ba142cbda_cgraph.svg" width="392" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_ad5c1c741b188bfe85dac350ba142cbda_icgraph.svg" width="543" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3dc533c94da57271e465fedbab5c3372" name="a3dc533c94da57271e465fedbab5c3372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dc533c94da57271e465fedbab5c3372">&#9670;&#160;</a></span>FOE_fclose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FOE_fclose </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function handling the final FOE_fwrite when we close up regardless if we have filled the buffers or not. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of copied bytes on success, 0 if failed. </dd></dl>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a3dc533c94da57271e465fedbab5c3372_icgraph.svg" width="680" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a97f7ba1088e69d82d24ce6326d9b0800" name="a97f7ba1088e69d82d24ce6326d9b0800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97f7ba1088e69d82d24ce6326d9b0800">&#9670;&#160;</a></span>FOE_fopen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FOE_fopen </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>num_chars</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>pass</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>op</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate a write or read request by checking filename and password. </p>
<p>This function is called by the application to validate a file transfer request. It checks the filename and password against the configured files and passwords. If the filename and password match, the function returns 0, indicating that the request is valid. If the filename or password do not match, the function returns an error code indicating the reason for the failure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Filename </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_chars</td><td>Length of filename </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pass</td><td>Numeric variable of password </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">op</td><td>Request op-code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if we succeed, FOE_ERR_NOTFOUND something wrong with filename or password </dd></dl>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a97f7ba1088e69d82d24ce6326d9b0800_icgraph.svg" width="680" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ade156a8af993e2d107fab2fe1d46a32b" name="ade156a8af993e2d107fab2fe1d46a32b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade156a8af993e2d107fab2fe1d46a32b">&#9670;&#160;</a></span>FOE_fwrite()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FOE_fwrite </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function reading mailbox buffer to local buffer to be handled by application write hook. Ex. flash routine used by software update. It will consume the buffer and call the write hook every time the configured flush buffer limit is reached. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Length of data to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of copied bytes. </dd></dl>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_ade156a8af993e2d107fab2fe1d46a32b_icgraph.svg" width="678" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ab759787663f3dbf3eefc2d7d4ebb7a48" name="ab759787663f3dbf3eefc2d7d4ebb7a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab759787663f3dbf3eefc2d7d4ebb7a48">&#9670;&#160;</a></span>FOE_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FOE_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize by clearing all current status variables. </p>
<p>Initializes the File Over EtherCAT (FoE) protocol. </p>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_ab759787663f3dbf3eefc2d7d4ebb7a48_icgraph.svg" width="808" height="227"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4f46f3b293f1ba5213ab65aa6464ae40" name="a4f46f3b293f1ba5213ab65aa6464ae40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f46f3b293f1ba5213ab65aa6464ae40">&#9670;&#160;</a></span>FOE_send_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static uint32_t FOE_send_ack </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an FoE ack data frame. </p>
<dl class="section return"><dt>Returns</dt><dd>0 or error number. </dd></dl>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a4f46f3b293f1ba5213ab65aa6464ae40_cgraph.svg" width="290" height="38"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_a4f46f3b293f1ba5213ab65aa6464ae40_icgraph.svg" width="704" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="adfbccffdc68d71c309992b25e4339d21" name="adfbccffdc68d71c309992b25e4339d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfbccffdc68d71c309992b25e4339d21">&#9670;&#160;</a></span>FOE_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void FOE_write </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FoE write request handler. Starts with Initialize, Open and Ack that we can/will receive data. On error we will send FOE Abort. </p>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_adfbccffdc68d71c309992b25e4339d21_cgraph.svg" width="422" height="164"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d8/d41/a00038_adfbccffdc68d71c309992b25e4339d21_icgraph.svg" width="546" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7cc484767f3b463b2a72365d9c761a1f" name="a7cc484767f3b463b2a72365d9c761a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc484767f3b463b2a72365d9c761a1f">&#9670;&#160;</a></span>foe_cfg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d32/a00041.html#a7685793837c0c8b6c72dd3111024c4a1">foe_cfg_t</a>* foe_cfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main FoE configuration pointer data array. Structure is allocated and filled by the application defining what preferences it requires. </p>

</div>
</div>
<a id="a9cf71eb8bad5e552b2b8eccef7050e98" name="a9cf71eb8bad5e552b2b8eccef7050e98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf71eb8bad5e552b2b8eccef7050e98">&#9670;&#160;</a></span>foe_file</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d32/a00041.html#aa2b23175c3134e03271153b3894b6059">foe_file_cfg_t</a>* foe_file</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to current file configuration item used by FoE. </p>

</div>
</div>
<a id="a1f2c07c0dfd2d9a88c27b47abf1651af" name="a1f2c07c0dfd2d9a88c27b47abf1651af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f2c07c0dfd2d9a88c27b47abf1651af">&#9670;&#160;</a></span>foe_file_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char foe_file_name[<a class="el" href="../../dd/d32/a00041.html#a67c78bb265f195309e12db00ead5e50e">FOE_FN_MAX</a>+1]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Variable holding current filename read at FOE Open. </p>

</div>
</div>
<a id="adcd7d70e05228c39934e5605bc705839" name="adcd7d70e05228c39934e5605bc705839"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd7d70e05228c39934e5605bc705839">&#9670;&#160;</a></span>FOEvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d32/a00041.html#aacf681139f484fc5fd6bfcc1a3e67e62">_FOEvar</a> FOEvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main FoE status data array. Structure gets filled with current status variables during FoE usage. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d8/d41/a00038.html">esc_foe.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
