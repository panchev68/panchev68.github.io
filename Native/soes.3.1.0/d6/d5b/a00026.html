<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SOES: esc_eep.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SOES<span id="projectnumber">&#160;v3.1.0</span>
   </div>
   <div id="projectbrief">Simple Open Source EtherCAT Slave</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/d5b/a00026.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">esc_eep.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the implementation of the ESC EEPROM (Electrically Erasable Programmable Read-Only Memory) handling functions. </p>
<p>The functions in this file are responsible for reading from and writing to the EEPROM of the EtherCAT Slave Controller (ESC). The EEPROM is used to store configuration and calibration data that is required for the operation of the ESC.</p>
<p>The main functionalities provided by this file include:</p><ul>
<li>Initialization of the EEPROM interface</li>
<li>Reading data from the EEPROM</li>
<li>Writing data to the EEPROM</li>
<li>Error handling for EEPROM operations</li>
</ul>
<p>The implementation ensures that the EEPROM operations are performed in a reliable and efficient manner, with appropriate error checking and handling mechanisms.</p>
<dl class="section note"><dt>Note</dt><dd>This file is part of the ESC firmware and is intended to be used in conjunction with other ESC-related modules. </dd></dl>
</div><div class="textblock"><code>#include &quot;<a class="el" href="../../d5/d16/a00029.html">esc_eep.h</a>&quot;</code><br />
<code>#include &quot;cc.h&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d51/a00017.html">esc.h</a>&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for esc_eep.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d0/d33/a00027.svg" width="546" height="336"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a576af053d37a7fef3a06513e59ede5f7" id="r_a576af053d37a7fef3a06513e59ede5f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a576af053d37a7fef3a06513e59ede5f7">EEP_process</a> (void)</td></tr>
<tr class="memdesc:a576af053d37a7fef3a06513e59ede5f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">EPP periodic task of ESC side EEPROM emulation.  <br /></td></tr>
<tr class="separator:a576af053d37a7fef3a06513e59ede5f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09a4df586deb94f5bfec05042ebb2df" id="r_ad09a4df586deb94f5bfec05042ebb2df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad09a4df586deb94f5bfec05042ebb2df">EEP_set_read_size</a> (uint16_t read_size)</td></tr>
<tr class="memdesc:ad09a4df586deb94f5bfec05042ebb2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set read size for EEPROM operations.  <br /></td></tr>
<tr class="separator:ad09a4df586deb94f5bfec05042ebb2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55b562c6817b0f0d40afead62633729e" id="r_a55b562c6817b0f0d40afead62633729e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a55b562c6817b0f0d40afead62633729e">EEP_set_reload_function_pointer</a> (void(*reload_ptr)(<a class="el" href="../../d5/d16/a00029.html#abf216fd88d2a102af53d2a1ac7bb613c">eep_stat_t</a> *stat))</td></tr>
<tr class="memdesc:a55b562c6817b0f0d40afead62633729e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set reload function pointer.  <br /></td></tr>
<tr class="separator:a55b562c6817b0f0d40afead62633729e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5fc5b62afa59cbc2c2e7a5df18a61378" id="r_a5fc5b62afa59cbc2c2e7a5df18a61378"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5fc5b62afa59cbc2c2e7a5df18a61378">eep_buf</a> [8]</td></tr>
<tr class="separator:a5fc5b62afa59cbc2c2e7a5df18a61378"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ffd935521d2a33b162cea36c3651718" id="r_a1ffd935521d2a33b162cea36c3651718"><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1ffd935521d2a33b162cea36c3651718">eep_read_size</a> = 8U</td></tr>
<tr class="separator:a1ffd935521d2a33b162cea36c3651718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa864ec2a091a36ef15a29f15bc966522" id="r_aa864ec2a091a36ef15a29f15bc966522"><td class="memItemLeft" align="right" valign="top">static void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa864ec2a091a36ef15a29f15bc966522">eep_reload_ptr</a> )(<a class="el" href="../../d5/d16/a00029.html#abf216fd88d2a102af53d2a1ac7bb613c">eep_stat_t</a> *stat) = NULL</td></tr>
<tr class="separator:aa864ec2a091a36ef15a29f15bc966522"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a576af053d37a7fef3a06513e59ede5f7" name="a576af053d37a7fef3a06513e59ede5f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576af053d37a7fef3a06513e59ede5f7">&#9670;&#160;</a></span>EEP_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EEP_process </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>EPP periodic task of ESC side EEPROM emulation. </p>
<p>Periodic EEPROM process.</p>
<p>This function processes EEPROM commands from the ESC. It handles read, write, and reload commands, and updates the EEPROM status accordingly.</p>
<p>The function reads the EEPROM status register, checks the command, and performs the corresponding operation. It reads data from the EEPROM, writes data to the EEPROM, or reloads the EEPROM configuration based on the command. The function also handles error conditions and updates the status register accordingly. </p>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d5b/a00026_a576af053d37a7fef3a06513e59ede5f7_cgraph.svg" width="244" height="190"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad09a4df586deb94f5bfec05042ebb2df" name="ad09a4df586deb94f5bfec05042ebb2df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09a4df586deb94f5bfec05042ebb2df">&#9670;&#160;</a></span>EEP_set_read_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EEP_set_read_size </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>read_size</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set read size for EEPROM operations. </p>
<p>Set read size, 4 Byte or 8 Byte depending on ESC. Default 8 Byte.</p>
<p>This function sets the read size for EEPROM operations. The read size can be either 4 bytes or 8 bytes. The default read size is 8 bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">read_size</td><td>The read size to set (4 or 8 bytes). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a55b562c6817b0f0d40afead62633729e" name="a55b562c6817b0f0d40afead62633729e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55b562c6817b0f0d40afead62633729e">&#9670;&#160;</a></span>EEP_set_reload_function_pointer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EEP_set_reload_function_pointer </td>
          <td>(</td>
          <td class="paramtype">void(*</td>          <td class="paramname"><span class="paramname"><em>reload_ptr&#160;</em></span>)(<a class="el" href="../../d5/d16/a00029.html#abf216fd88d2a102af53d2a1ac7bb613c">eep_stat_t</a> *stat)</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set reload function pointer. </p>
<p>This function sets the reload function pointer. The reload function is responsible for updating the current EEPROM status accordingly. For example, on a CRC error, the reload function should set stat.contstat.bits.csumErr = 1 and stat.contstat.bits.ackErr = 1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reload_ptr</td><td>The reload function pointer to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5fc5b62afa59cbc2c2e7a5df18a61378" name="a5fc5b62afa59cbc2c2e7a5df18a61378"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc5b62afa59cbc2c2e7a5df18a61378">&#9670;&#160;</a></span>eep_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t eep_buf[8]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ffd935521d2a33b162cea36c3651718" name="a1ffd935521d2a33b162cea36c3651718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ffd935521d2a33b162cea36c3651718">&#9670;&#160;</a></span>eep_read_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t eep_read_size = 8U</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa864ec2a091a36ef15a29f15bc966522" name="aa864ec2a091a36ef15a29f15bc966522"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa864ec2a091a36ef15a29f15bc966522">&#9670;&#160;</a></span>eep_reload_ptr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void(* eep_reload_ptr) (<a class="el" href="../../d5/d16/a00029.html#abf216fd88d2a102af53d2a1ac7bb613c">eep_stat_t</a> *stat) </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d16/a00029.html#abf216fd88d2a102af53d2a1ac7bb613c">eep_stat_t</a> *</td>          <td class="paramname"><span class="paramname"><em>stat</em></span></td><td>)</td>
          <td> = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d6/d5b/a00026.html">esc_eep.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
